(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{144:function(e,t,n){e.exports=n(160)},160:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),l=n(14),i=n(6),u=n.n(i),s=n(10),d=n(7),m=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a){var r,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="page=".concat(t||0,"&per_page=").concat(n||1),c="",c=a?"/api/v1/watch/pages/".concat(a,"?").concat(r):"/api/v1/watch/pages?".concat(r),console.log("fetching items ".concat(c)),e.next=6,fetch(c,{method:"get"});case 6:return 200!==(o=e.sent).status&&console.log(o),e.next=10,o.json();case 10:return l=e.sent,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),p=n(200),f=n(15),b=n(28),g=n(25);function h(){var e=Object(l.a)(["\n\tpadding: 0;\n\tpadding: 1em 0;\n\t\n\t\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 10px auto;\n\t\n\t\n\tinput {\n\t\tgrid-column: 1;\n\t\tbackground-color: #363636;\n\t\tborder: none;\n\t}\n\n\tbutton {\n\t\tgrid-column: 3;\n\t}\n"]);return h=function(){return e},e}var v=f.a.form(h());function E(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],o=n[1],l=function(t){t.preventDefault();var n=function(e){for(var t=e.split(" "),n=[],a=[],r=0;r<t.length;r++){":"===t[r][0]&&a.push(r)}for(var c=0;c<a.length;c++){var o=a[c],l=a[c+1]||t.length,i=t.slice(o,l).join(" ");n.push({key:i.split(" ")[0].substring(1),value:i.split(" ").splice(1,i.length).join(" ")})}return n}(c)[0];e.formCallback(c,n)};return r.a.createElement(v,null,r.a.createElement("input",{className:"input",placeholder:"Search",defaultValue:"",onSubmit:l,onChange:function(e){o(e.currentTarget.value)}}),r.a.createElement("button",{className:"button is-dark",onClick:l},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.f,color:"white"})))}var j=n(111),O=n(86),w=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://blog_gateway/api/v1/watch/history/find/".concat(t),console.log('fetching items: "'.concat(n,'"')),e.abrupt("return",fetch(n,{method:"get"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(123),x=n.n(y);n(85);function k(){var e=Object(l.a)(["\n\tmargin: 1em 0;\n\tpadding: 1ch 0;\n\tfont-size: 0.5em;\n\tborder-bottom: 1px solid #dedede;\n\tpadding: 2.5px 5px;\n"]);return k=function(){return e},e}function N(){var e=Object(l.a)(["\n\toverflow: scroll;\n\tmargin-top: 1em;\n\tborder-radius: 10px;\n\n\t.content {\n\t\tmax-height: 1000px;\n\t\ttransition: max-height 0.2s;\n\t\tbackground-color: #363636;\n\t\tpadding: 2.5px 5px;\n\t}\n\n\t.collapsed {\n\t\tmax-height: 0;\n\t\ttransition: max-height 0.2s;\n\t\toverflow: hidden;\n\t}\n\n\ta {\n\t\tcolor: #dedede;\n\t\tbackground-color: #363636;\n\t\twidth: 100%;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr auto 10px;\n\t\tpadding: 2.5px 5px;\n\t\tpadding-top: 5px;\n\t}\n\n\tsvg {\n\t\theight: 100%;\n\t}\n"]);return N=function(){return e},e}var C=f.a.div(N()),S=f.a.div(k());function _(e){var t=e.collapsed;return r.a.createElement(b.a,{onClick:function(e){e.preventDefault()},className:"has-text-right icon",icon:t?g.b:g.a,color:"white"})}var P=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)("Open ".concat(e.name)),i=Object(d.a)(l,2),m=i[0],p=i[1],f=Object(a.useState)(!0),b=Object(d.a)(f,2),g=b[0],h=b[1],v=Object(a.useState)([]),E=Object(d.a)(v,2),j=E[0],O=E[1],w=Object(a.useState)(0),y=Object(d.a)(w,2),x=y[0],k=(y[1],e._id),N=function(){var t=Object(s.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=7;break}return t.next=3,e.fetchDataCallback(k);case 3:n=t.sent,a=n.data,O(a),h(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(C,null,r.a.createElement("a",{href:"/",onClick:function(t){t.preventDefault(),o(!c);var n=t.target.closest("div").querySelector(".content");c?(n.className="content collapsed",p("Open ".concat(e.name))):(n.className="content",p("Close ".concat(e.name)),N())}},m," ",r.a.createElement(_,{collapsed:c})),r.a.createElement("div",{className:"content collapsed"},!g&&j.map((function(t,n){return console.log("redering ".concat(e.name," dropdown")),e.renderDataCallback(t,k,n)})),!g&&e.addField&&e.renderAddFieldCallback(x),!g&&0===j.length&&"No data found."))};function T(e){var t=e._id,n=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P,{_id:t,name:"history",addfield:!1,fetchDataCallback:function(e){return n(e)},renderDataCallback:function(e,t){return console.log(e),n=e,a=t,Array.isArray(n.data.modified)||(n.data.modified=new Array(n.data.modified)),r.a.createElement(S,{key:a+n.data.timestamp},r.a.createElement("h3",null,"Author"),r.a.createElement("span",null,"Commit from ",n.data.committer.name," at"," ",n.data.timestamp,"."),r.a.createElement("h3",null,"Message"),r.a.createElement("span",null,x.a.emojify(n.data.message)),r.a.createElement("h3",null,"Modified"),r.a.createElement("ul",null,n.data.modified.map((function(e,t){return r.a.createElement("li",{key:n.data.timestamp},r.a.createElement("span",null,e))}))));var n,a}})}function D(){var e=Object(l.a)(["\n\t.field-edit-button {\n\t\tgrid-column: last-col - 1;\n\t}\n\n\t.field-delete-button {\n\t\tgrid-column: last-col;\n\t}\n\n\tspan {\n\t\tcolor: #dedede;\n\t\t// dont overflow text\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t}\n"]);return D=function(){return e},e}function F(){var e=Object(l.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto;\n\t// padding: 5px;\n\n\tinput {\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tbackground: ",";\n\t\tborder-top: none;\n\t\tborder-left: none;\n\t\tborder-right: none;\n\t\tborder-bottom: 1px solid #dedede;\n\t\tcolor: #dedede;\n\t\tfont-size: 1em;\n\t}\n"]);return F=function(){return e},e}function z(){var e=Object(l.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto;\n\t// padding: 5px;\n\n\tinput {\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tbackground: ",";\n\t\tborder-top: none;\n\t\tborder-left: none;\n\t\tborder-right: none;\n\t\tborder-bottom: 1px solid #dedede;\n\t\tcolor: #dedede;\n\t\tfont-size: 1em;\n\t}\n"]);return z=function(){return e},e}function I(){var e=Object(l.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: ",";\n\t// padding: 5px;\n\tbackground: ",";\n"]);return I=function(){return e},e}var A=f.a.div(I(),(function(e){return e.noTitle?"1fr auto":"30% 1fr auto auto"}),(function(e){return e.color?e.color:"magenta"})),J=f.a.div(z(),(function(e){return e.color?e.color:"#282C34"})),M=(f.a.div(F(),(function(e){return e.color?e.color:"#282C34"})),f.a.div(D()));var V=function(e){var t=Object(a.useState)(e.initialMode),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(e.value),i=Object(d.a)(l,1)[0],m=Object(a.useState)(e.value),p=Object(d.a)(m,2),f=p[0],h=p[1],v=Object(a.useState)(!1),E=Object(d.a)(v,2),j=E[0],O=E[1],w=Object(a.useRef)(""),y=Object(a.useState)(!1),x=Object(d.a)(y,2),k=x[0],N=x[1],C=function(){console.log("exiting without saving"),h(f),w.current=f,o("dispay")},S=function(){try{e.formCallback({_id:e._id,newValue:w.current,fieldName:e.fieldName,value:f,firstValue:i},f,w.current).then((function(e){return e.json()})).then((function(e){e&&h(w.current),console.log(e)})).catch((function(e){console.error(e),h(i)})),o("display"),console.log("finished updating field successfully")}catch(t){console.log(t)}},_=function(){var t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.formCallback({_id:e._id,newValue:w.current,fieldName:e.fieldName,value:f,firstValue:i},w.current,i).then((function(e){e&&h(i)}));case 2:console.log("done"),N(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(M,null,j?r.a.createElement(r.a.Fragment,null):function(){switch(c){case"edit":return r.a.createElement(J,{id:e.value,color:e.color},r.a.createElement("input",{className:"is-primary",defaultValue:f,id:"inputField",disabled:e.disabled,onChange:function(t){w.current=t.currentTarget.value,e.onChange&&e.onChange(t.currentTarget.value)}}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-text",onClick:function(){S(),N(!0)}},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.e})),r.a.createElement("button",{className:"button is-text",onClick:C},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.g}))));case"add":return r.a.createElement(J,{id:e.value,color:e.color},r.a.createElement("input",{className:"is-primary",defaultValue:f,id:"inputField",disabled:e.disabled,onChange:function(e){w.current=e.currentTarget.value}}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-text",onClick:S},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.d}))));case"display":default:return r.a.createElement(A,{noTitle:!!e.noTitle,color:e.color},!e.noTitle&&r.a.createElement("span",null,e.name,": "),r.a.createElement("span",null,f),k&&r.a.createElement("button",{className:"button is-text",onClick:_},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.i})),!e.disabled&&r.a.createElement("button",{className:"button is-text field-edit-button",onClick:function(){o("edit")}},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.c})),e.deletable&&r.a.createElement("button",{className:"button is-text field-delete-button",onClick:function(){O(!0),e.deleteCallback(e._id,w,e.fieldName,f,i)}},r.a.createElement(b.a,{className:"has-text-right icon",icon:g.h})))}}())};function H(e){var t=e.collapsed;return r.a.createElement(b.a,{onClick:function(e){e.preventDefault()},className:"has-text-right icon",icon:t?g.b:g.a,color:"white"})}function B(e){return r.a.createElement(b.a,{onClick:function(t){console.log("add button clicked"),t.preventDefault(),e.onClick()},className:"has-text-right icon",icon:g.d,color:"white"})}var q=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a){var r,c,o,l,i,s,d,m,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,c={_id:r},e.next=4,fetch("http://blog_gateway/api/v1/watch/page?_id=".concat(r));case 4:return e.next=6,e.sent.json();case 6:return o=e.sent,console.log("the sources received from the database: ".concat(JSON.stringify(o.source,null,2))),l=o.source,console.log("avoiding ".concat(n," from the database sources")),i=l.filter((function(e){return e.url!==n})).map((function(e){return e})),console.log("add ".concat(a," to: ").concat(i)),i.push({remote:!0,url:a}),d={filter:c,update:s={source:i}},console.log("update: ".concat(JSON.stringify(s,null,2))),m=JSON.stringify(d),console.log(d),p="http://blog_gateway/api/v1/watch/update/".concat(r),e.abrupt("return",fetch(p,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:m}));case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a,r,c){var o,l,i,s,d,m,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={_id:t},e.next=3,fetch("http://blog_gateway/api/v1/watch/page?_id=".concat(t));case 3:return e.next=5,e.sent.json();case 5:return l=e.sent,i=l.source,s=i.filter((function(e){return e.url!==c})).map((function(e){return e})),d={filter:o,update:{source:s}},console.log("stringifying the body"),m=JSON.stringify(d),p="http://blog_gateway/api/v1/watch/update/".concat(t),e.abrupt("return",fetch(p,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:m}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}();function W(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)("Open ".concat(e.name)),i=Object(d.a)(l,2),u=i[0],s=i[1],m=Object(a.useState)(!0),p=Object(d.a)(m,2),f=p[0],b=p[1],g=Object(a.useState)([]),h=Object(d.a)(g,2),v=h[0],E=h[1],j=e._id,O=e.source;return r.a.createElement(C,null,r.a.createElement("a",{href:"/",onClick:function(t){t.preventDefault(),o(!c);var n=t.target.closest("div").querySelector(".content");c?(n.className="content collapsed",s("Open ".concat(e.name))):(n.className="content",s("Close ".concat(e.name)),function(){if(!c){var e=O instanceof Array&&void 0!==O?O:new Array(O);E(e),b(!1)}}())}},u," ",r.a.createElement(H,{collapsed:c})),r.a.createElement("div",{className:"content collapsed"},!f&&v.map((function(e,t){return function(e,t,n,a){return r.a.createElement(V,{noTitle:!0,name:"URL",value:e,fieldName:"source.url",disabled:!1,deletable:!0,initialMode:a||"display",_id:t,color:"#363636",key:t+"/"+e+n,formCallback:q,deleteCallback:function(e,t,n,a,r){var c=[e,t,n,a,r];return R.apply(void 0,c)},onChange:function(e){}})}(e.url,j,t,e.initialMode)})),!f&&0===v.length&&"No data found.",e.addField&&r.a.createElement(B,{onClick:function(){console.log("adding field"),E(v.concat({url:"",initialMode:"edit"}))}})))}var U=n(196),G=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a){var r,c,o,l,i,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,c=t.fieldName,t.newValue,o={_id:r},l=Object(O.a)({},c,a),console.log("filter: ".concat(JSON.stringify(o))),console.log("update: ".concat(JSON.stringify(l))),i={filter:o,update:l},console.log("stringifying the body"),s=JSON.stringify(i),d="http://blog_gateway/api/v1/watch/update/".concat(r),e.abrupt("return",fetch(d,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:s}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://blog_gateway/api/v1/watch/delete/".concat(t),a={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}},e.next=4,fetch(n,a);case 4:return e.next=6,e.sent.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)([]),i=Object(d.a)(l,2),m=i[0],p=i[1],f=e.data.original._id;function b(){o(!c),c||(console.log('loading fields for the modal: "'.concat(e.pageName,'"')),p(g.map((function(e){return e}))))}var g=[{name:"ID",fieldName:"_id",value:e._id,disabled:!0},{name:"Page Name",fieldName:"pageName",value:e.pageName,disabled:!1},{name:"Website Path",fieldName:"websitePath",value:e.websitePath,disabled:!1},{name:"Hidden",fieldName:"hidden",value:e.hidden,disabled:!1},{name:"Revision",fieldName:"__v",value:e.__v,history:e.history,disabled:!0}].map((function(t,n){return r.a.createElement(V,{name:t.name,fieldName:t.fieldName,value:t.value,key:e._id+n,_id:e._id,disabled:t.disabled,deletable:!1,color:"#282C34",formCallback:G})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button is-dark",key:e.cellID,onClick:b},"Edit"),r.a.createElement("div",{className:"modal ".concat(c?"is-active":""," ")},r.a.createElement("div",{className:"modal-background",onClick:b}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},e.pageName),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:b})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("div",{className:"fieldsGoHere"},m.map((function(e){return e}))),r.a.createElement(T,{_id:e.data.original._id,source:e.data.original.source}),r.a.createElement(W,{_id:e.data.original._id,source:e.data.original.source,addField:!0,name:"sources"})),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement(U.a,{variant:"contained",type:"submit",color:"primary",disabled:!1,onClick:Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(f);case 2:b();case 3:case"end":return e.stop()}}),e)})))},"Delete")))))}var K=function(e){var t=e._id,n=Object(a.useState)(!1),c=Object(d.a)(n,2),o=c[0],l=c[1],i=Object(a.useState)(!1),m=Object(d.a)(i,2),p=m[0],f=m[1],b=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://blogbuilder/build/".concat(t),1e4,a=new AbortController,r={method:"GET",timeout:1e4,signal:a.signal},c=setTimeout((function(){return a.abort()}),1e4),e.prev=5,e.next=8,fetch(n,r);case 8:return o=e.sent,e.next=11,o.json();case 11:return l=e.sent,clearTimeout(c),e.abrupt("return",l);case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{});case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(U.a,{variant:"contained",type:"submit",color:"primary",disabled:o,style:{backgroundColor:p?"green":"".concat(o?"#666A72":"#1976D2")},onClick:Object(s.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),console.log("building page..."),e.next=4,b(t);case 4:n=e.sent,console.log("done building page"),console.log(n),l(!1),f(!0);case 9:case"end":return e.stop()}}),e)})))},"Build")};function Q(){var e=Object(l.a)(["\n\ttable {\n\t\tborder: none;\n\t\twidth: 100%;\n\t\tborder-spacing: 0;\n\n\t\ttr {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: 0.5fr 1fr 2fr 10% 10%;\n\t\t\tcolor: #dedede;\n\t\t}\n\n\t\t// make the loading bar (last row) span all columns\n\t\ttr:last-child > td {\n\t\t\tgrid-column: 1 / -1;\n\t\t}\n\n\t\ttr:hover {\n\t\t\tbackground: #51555e;\n\t\t}\n\n\t\ttd {\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t}\n\n\t\ttd:last-child,\n\t\ttd:nth-last-child(2) {\n\t\t\talign-self: end;\n\t\t\tjustify-self: right;\n\t\t}\n\n\t\tth {\n\t\t\ttext-align: left;\n\t\t}\n\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0.5rem;\n\t\t\t// border-bottom: 1px solid black;\n\t\t\t// border-right: 1px solid black;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(['\n\tpadding: 1em 0;\n\tstrong {\n\t\tcolor: #dedede;\n\t}\n\n\tinput {\n\t\tbackground: #363636;\n\t\tborder: 0px solid black;\n\t\tborder-radius: 5px;\n\t\t// padding: 10px;\n\t\theight: 40px;\n\t\ttext-align: center;\n\t\tcolor: #dedede;\n\t}\n\n\t// disable input spinners (tick goto page box up and down)\n\tinput[type="number"]::-webkit-outer-spin-button,\n\tinput[type="number"]::-webkit-inner-spin-button {\n\t\t-webkit-appearance: none;\n\t\tmargin: 0;\n\t}\n\n\tinput[type="number"] {\n\t\t-moz-appearance: textfield;\n\t}\n\n\tselect {\n\t\tbackground: #363636;\n\t\tborder: 0px solid black;\n\t\tpadding: 5px;\n\t\ttext-align: center;\n\t\tfont-size: 1em;\n\t\tborder-radius: 5px;\n\t\tcolor: #dedede;\n\n\t\t// remove the dropdown arrow\n\t\t-webkit-appearance: none;\n\t\t-moz-appearance: none;\n\t\ttext-indent: 1px;\n\t\ttext-overflow: "";\n\t}\n']);return X=function(){return e},e}function Y(){var e=Object(l.a)(["\n\t* {\n\t\tmargin: 0 10px;\n\t}\n\n\t*:first-child {\n\t\tmargin: 0;\n\t}\n"]);return Y=function(){return e},e}function Z(){var e=Object(l.a)(["\n\tbutton {\n\t\tmargin: 0 10px;\n\t}\n\n\t*:last-child {\n\t\tmargin: 0;\n\t}\n"]);return Z=function(){return e},e}function ee(){var e=Object(l.a)(["\n\tgrid-column: 1 / -1;\n\tprogress {\n\t\twidth: 100%;\n\t\tbackground: #363636;\n\t}\n"]);return ee=function(){return e},e}var te=f.a.tr(ee()),ne=f.a.div(Z()),ae=f.a.div(Y()),re=f.a.div(X()),ce=f.a.div(Q());function oe(e){var t=e.columns,n=e.data,a=e.fetchData,c=e.loading,o=e.pageCount,l=Object(j.useTable)({columns:t,data:n,initialState:{pageIndex:0},manualPagination:!0,pageCount:o},j.usePagination),i=l.getTableProps,u=l.getTableBodyProps,s=l.gotoPage,m=l.page,p=l.canPreviousPage,f=l.canNextPage,b=l.pageOptions,g=l.pageCount,h=l.nextPage,v=l.previousPage,O=l.setPageSize,w=l.prepareRow,y=l.state,x=y.pageIndex,k=y.pageSize,N=r.a.useState(""),C=Object(d.a)(N,2),S=C[0],_=C[1];return r.a.useEffect((function(){console.log("the searchFilter is: ".concat(S)),a({pageIndex:x,pageSize:k,searchFilter:S})}),[a,x,k,S]),r.a.createElement(ce,null,r.a.createElement(E,{formCallback:function(e,t){_(t?"".concat(t.key,"/").concat(t.value):"pageName/".concat(e||"placeholder")),e||_(""),s(0)}}),r.a.createElement("table",i(),r.a.createElement("tbody",u(),m.map((function(e,t){return w(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e,t){var n;switch(e.column.Header){case"Edit":n=r.a.createElement("td",e.getCellProps(),r.a.createElement(L,{data:e.row,cellID:e.row.id,pageName:e.row.original.pageName,websitePath:e.row.original.websitePath,hidden:e.row.original.hidden?"true":"false",__v:e.row.original.__v,_id:e.row.allCells[1].value}));break;case"Build":n=r.a.createElement("td",e.getCellProps(),r.a.createElement(K,{key:e.row.id,_id:e.row.original._id},"Build"));break;case"Index":n=r.a.createElement("td",e.getCellProps(),r.a.createElement("span",{style:{color:"white"}},e.row.index));break;default:n=r.a.createElement("td",e.getCellProps(),e.render("Cell"))}return n})))})),r.a.createElement(te,null,c&&r.a.createElement("td",null,r.a.createElement("progress",{className:"progress is-medium is-dark",max:"100"},"45%"))))),r.a.createElement(re,{className:"pagination"},r.a.createElement(ne,null,r.a.createElement("button",{className:"button is-dark",onClick:function(){return s(0)},disabled:!p},"<<")," ",r.a.createElement("button",{className:"button is-dark",onClick:function(){return v()},disabled:!p},"<")," ",r.a.createElement("button",{className:"button is-dark",onClick:function(){return h()},disabled:!f},">")," ",r.a.createElement("button",{className:"button is-dark",onClick:function(){return s(g-1)},disabled:!f},">>")," "),r.a.createElement(ae,null,r.a.createElement("span",null,"Page"," ",r.a.createElement("strong",null,x+1," of ",b.length)," "),r.a.createElement("span",null,"Go to page:"," ",r.a.createElement("input",{type:"number",defaultValue:x+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"100px"}}))," ",r.a.createElement("select",{className:"select",value:k,onChange:function(e){O(Number(e.target.value))}},[1,10,20,30,40,50].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)}))))))}function le(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!0),l=Object(d.a)(o,2),i=l[0],f=l[1],b=Object(a.useState)(0),g=Object(d.a)(b,2),h=g[0],v=g[1],E=Object(a.useMemo)((function(){return[{Header:"Index",accessor:"i"},{Header:"ID",accessor:"_id"},{Header:"page Name",accessor:"pageName"},{Header:"Edit",accessor:""},{Header:"Build",accessor:""}]}),[]),j=r.a.useCallback(function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,o,l,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageSize,a=t.pageIndex,r=t.searchFilter,f(!0),e.next=4,m(a,n,r);case 4:o=e.sent,l=o.data,c(l),r?(s=Math.ceil(parseInt(l.length)/n),v(s),console.log("the new number of pages is: ".concat(s))):(i=Math.ceil(parseInt(o.count)/n),v(i),console.log("the new number of pages is: ".concat(i))),f(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement(p.a,{maxWidth:"md"},r.a.createElement(oe,{columns:E,data:n,fetchData:j,loading:i,pageCount:h}))}var ie=n(127),ue=n(16),se=n(202);function de(){var e=Object(l.a)(["\ndisplay: grid;\ngrid-template-columns: 1fr auto auto;\n& button {\n\tmargin: 10px;\n}\n"]);return de=function(){return e},e}function me(){var e=Object(l.a)(["\nmargin: 1.75em 0;\n"]);return me=function(){return e},e}function pe(){var e=Object(l.a)(["\nmargin-top: 5em;\npadding: 2em;\n"]);return pe=function(){return e},e}function fe(){var e=Object(l.a)(["\n// margin: 2em;\n// padding: 0.25em 0;\n"]);return fe=function(){return e},e}var be=f.a.fieldset(fe()),ge=f.a.div(pe()),he=f.a.div(me()),ve=f.a.div(de()),Ee=n(205),je=n(5),Oe=n(201),we=n(107),ye=Object(je.a)({root:{color:we.a[400],"&$checked":{color:we.a[600]}},checked:{}})((function(e){return r.a.createElement(Ee.a,Object.assign({color:"default"},e))})),xe=Object(Oe.a)((function(e){return{root:{"& fieldset":{margin:e.spacing(1,0)},"& pre":{color:"#dedede"}}}})),ke=Object(Oe.a)((function(e){return{root:{"& > *":{},"& button":{}}}})),Ne=n(43),Ce=Ne.c({pageName:Ne.d().required("Required"),websitePath:Ne.d().required("Required"),hidden:Ne.b(),sources:Ne.a(Ne.c({url:Ne.d().required()})),meta:Ne.c({template:Ne.d().oneOf(["blogPost.ejs","menu.ejs","homepage.ejs"]).required()})}),Se=n(75),_e=n(79),Pe=function(e){var t=e.label,n=Object(Se.a)(e,["label"]),a=Object(ue.g)(n),c=Object(d.a)(a,2),o=c[0],l=c[1];return delete n.placeholder,r.a.createElement("div",{noValidate:!0,autoComplete:"off"},r.a.createElement(ue.a,Object.assign({component:_e.a,variant:"outlined",label:t,className:"text-input"},o,n)),l.touched&&l.error?r.a.createElement("div",{className:"error"},l.error):null)},Te=n(112),De=n(206),Fe=function(e){e.children;var t=Object(Se.a)(e,["children"]),n=Object(ue.g)(Object(Te.a)(Object(Te.a)({},t),{},{type:"checkbox"})),a=Object(d.a)(n,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(De.a,{control:r.a.createElement(ye,Object.assign({},c,t)),label:"Hidden"}),o.touched&&o.error?r.a.createElement("div",{className:"error"},o.error):null)},ze=n(131),Ie=function(e){e.label;var t=Object(Se.a)(e,["label"]),n=Object(ue.g)(t),a=Object(d.a)(n,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(ze.a,Object.assign({},c,t)),o.touched&&o.error?r.a.createElement("div",{className:"error"},o.error):null)};var Ae=function(){var e=Object(ue.h)(),t=e.values,n=(e.errors,ke()),c=Object(a.useState)([]),o=Object(d.a)(c,2);return o[0],o[1],Object(a.useEffect)((function(){return console.log("updated"),function(){}}),[t.source]),r.a.createElement(ue.c,{name:"source",render:function(e){return r.a.createElement("div",{className:n.root},t.source&&t.source.length>0?t.source.map((function(t,n){return r.a.createElement(ve,{key:n},r.a.createElement(ue.a,{component:_e.a,variant:"outlined",label:"url ".concat(n),name:"source[".concat(n,"].url")}),r.a.createElement(U.a,{className:"top-button",variant:"contained",color:"primary",size:"small",type:"button",onClick:function(){return e.remove(n)}},"-"),r.a.createElement(U.a,{variant:"contained",color:"primary",type:"button",onClick:function(){return e.insert(n+1,"")}},"+"))})):r.a.createElement(U.a,{variant:"contained",color:"primary",size:"small",type:"button",onClick:function(){return e.push("")}},"Add page sources"))}})},Je=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,c,o,l,i,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.pageName,a=t.websitePath,r=t.hidden,c=t.source,o=t.meta,"http://blog_gateway/api/v1/watch/upload",l=Object(ie.a)(c);try{for(l.s();!(i=l.n()).done;)(s=i.value)&&(s.remote=!0)}catch(u){l.e(u)}finally{l.f()}return d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageName:n,websitePath:a,hidden:r,source:c,meta:o})},e.next=7,fetch("http://blog_gateway/api/v1/watch/upload",d).then((function(e){return e.json()}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=xe(),t=Object(a.useState)({success:!1,message:"please wait"}),n=Object(d.a)(t,2),c=n[0],o=n[1];return r.a.createElement(p.a,{className:e.root,maxWidth:"md"},r.a.createElement(se.a,{elevation:3,elementtype:"section"},r.a.createElement(ue.e,{initialValues:{pageName:"",websitePath:"",hidden:!1,source:[{url:""}],meta:{template:""}},validateOnChange:!1,validateOnBlur:!1,validationMount:!1,validationSchema:Ce,onSubmit:function(e,t){var n=t.setSubmitting;setTimeout(Object(s.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Je(e);case 2:(a=t.sent)instanceof Object&&o(a),n(!1);case 5:case"end":return t.stop()}}),t)}))),400)},handleChange:function(e){console.log("alert!")}},(function(e){var t=e.values,n=e.submitCount,a=e.isSubmitting;return r.a.createElement(ge,null,r.a.createElement(ue.d,null,r.a.createElement("h1",null,"Add page"),r.a.createElement(be,null,r.a.createElement(Pe,{label:"Page Name",name:"pageName",type:"text",placeholder:"page name"}),r.a.createElement(Pe,{label:"Website Path",name:"websitePath",type:"text",placeholder:"website path"})),r.a.createElement(be,null,r.a.createElement(Ae,null)),r.a.createElement(be,null,r.a.createElement(Fe,{name:"hidden",label:"hidden"},"Hide page")),r.a.createElement(be,null,r.a.createElement(Ie,{label:"Template",name:"meta.template"},r.a.createElement("option",{value:""},"Select a template"),r.a.createElement("option",{value:"blogPost.ejs"},"blogPost.ejs"),r.a.createElement("option",{value:"menu.ejs"},"menu.ejs"),r.a.createElement("option",{value:"homePage.ejs"},"homePage.ejs"))),r.a.createElement(he,null,r.a.createElement(U.a,{variant:"contained",type:"submit",color:"primary",disabled:a},"Submit")),r.a.createElement(se.a,{elevation:3},r.a.createElement("pre",null,r.a.createElement("code",null,0===n?JSON.stringify(t,"\n",4):JSON.stringify(c,null,4))))))}))))},Ve=n(132),He=n(18),Be=n(133),qe=n(203),Re=n(204);function We(){var e=Object(l.a)(["\n\tcolor: #dedede;\n\tfont-size: calc(10px + 1.5vmin);\n\t// padding: 0 10%;\n"]);return We=function(){return e},e}var Ue=f.a.div(We()),Ge=Object(Be.a)({typography:{fontFamily:"Cantarell, Raleway, Arial"},overrides:{MuiCssBaseline:{"@global":{"@font-face":"Cantarell"}}},palette:{type:"dark",background:{default:"#282c34"}}});var $e=function(){return r.a.createElement(qe.a,{theme:Ge},r.a.createElement(Re.a,null),r.a.createElement(Ue,null,r.a.createElement(Ve.a,null,r.a.createElement(He.a,{exact:!0,path:"/",component:le}),r.a.createElement(He.a,{exact:!0,path:"/upload",component:Me}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,n){}},[[144,1,2]]]);
//# sourceMappingURL=main.c56bc5f2.chunk.js.map